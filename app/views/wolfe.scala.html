@(document: controllers.doc.Document, compilers: Compilers, docRoot: String)

@import helper._
@import java.io.File

@directory(path:String) = @{
  println(path + "\t" + docRoot)
  new Directory(path, docRoot)
}

@dirNav(path:String) = {
    @directory(path).files.map { notebook =>
        <ul>
            <li class="@if(notebook.title==document.name){current}"><a href="/template/wolfe@{notebook.href}">@{notebook.title}</a></li>
            @if(notebook.title==document.name) {
            <ul>
                @document.cells.filter(_.compiler == "heading3").map { cell =>
                    <li><a href="#cell@{cell.id}">@{cell.input.code}</a></li>
                }
            </ul>
            }
        </ul>
    }
}


<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@document.name</title>
    <link rel="icon" type="image/x-icon" href="@routes.Assets.at("images/wolfe-logo-black.png")">

    <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/document.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/moro.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/moro-static.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/ace/ace.js")" type="text/javascript" charset="utf-8"></script>
    <script src="@routes.Assets.at("javascripts/ace/ext-language_tools.js")" type="text/javascript" charset="utf-8"></script>
    <link href="@routes.Assets.at("javascripts/bootstrap/css/bootstrap.min.css")" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
    <!--<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">-->
    <!--<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">-->
    <script src="@routes.Assets.at("javascripts/bootstrap/js/bootstrap.js")" type="text/javascript"></script>
        <link href="@routes.Assets.at("stylesheets/font-awesome/css/font-awesome.min.css")" rel="stylesheet">
        <link href="@routes.Assets.at("stylesheets/octicons/octicons.css")" rel="stylesheet">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/htmlgen.css")">
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/gridism.css")">
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/normalize.css")">
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/wolfe.css")">


</head>
<body class="wrap">
<header>
    <nav class="mobile-nav show-on-mobiles">
        <!--{% include primary-nav-items.html %}-->
    </nav>
    <div class="grid">
        <div class="unit two-fifths center-on-mobiles">
            <h1>
                <a href="/">
                    <span>Jekyll</span>
                    <img width="80px" src="@routes.Assets.at("images/wolfe-logo-yellow.png")" style="vertical-align: text-bottom">
                    <h1 class="logo-text"> Wolfe</h1>

                </a>
            </h1>
        </div>
        <nav class="main-nav unit three-fifths hide-on-mobiles">
            <ul>
                <li>
                    <a href="http://www.wolfe.ml/">Home</a>
                </li>
                <li class="current">
                    <a href="/template/wolfe/wolfe-docs/gettingstarted/01_welcome">Doc<span class="show-on-mobiles">s</span><span class="hide-on-mobiles">umentation</span></a>
                </li>
                <li>
                    <a href="http://www.wolfe.ml/news">News</a>
                </li>
                <li>
                    <a href="https://github.com/wolfe-pack/wolfe"><span class="hide-on-mobiles">View on </span>GitHub</a>
                </li>
            </ul>

        </nav>
    </div>
</header>
    <section>
        <div class="grid">
            <div id="cells" class="unit four-fifths center-on-mobiles">
                <h1>@Html(document.name)</h1>
            </div>
            <div class="unit one-fifth hide-on-mobiles">
                <div class="doc-nav">
                    <h4>Getting Started</h4>
                    @dirNav("wolfe-docs/gettingstarted")
                    <h4>Concepts</h4>
                    @dirNav("wolfe-docs/concepts")
                    <h4>Examples</h4>
                    @dirNav("wolfe-docs/examples")

                </div>
                <!--</aside>-->
            </div>
        </div>
    </section>
    <script>
        /* COMPILERS OBJECT */
        var compilers = {};
        @for(c <- compilers) {
           compilers.@{c.name} = {};
           compilers.@{c.name}.hideAfterCompile = @{c.hideAfterCompile};
           compilers.@{c.name}.editor = @Html(c.editorJavascript);
           compilers.@{c.name}.editorToInput = @Html(c.editorToInput);
           compilers.@{c.name}.aggregate = @{c.aggregatePrevious};
        }

        /* DOCUMENT OBJECT */
        var doc = newDoc("@(document.name)");

        /* add cells */
        var divCells = $('div#cells');
        @for(cell <- document.cells) {
        var mode = '@Html(cell.compiler)';
        var input = @Html(cell.inputJson);
        var id = @{cell.id};
        createStaticCellHTML(id, divCells, doc, mode, input, compilers);
        }
    </script>

<!--<div id="footer">-->
<!--<div class="container">-->
<!--<p class="text-muted">Check out the <a href="http://github.com/uclmr/wolfenstein">Wolfenstein project</a>.</p>-->
<!--</div>-->
<!--</div>-->
</body>
</html>